<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Information</title>

    <!-- Placeholder link to React / Bootstrap -->

    <!-- Link local CSS Sheet -->


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="/css/style.css">

    <style>
        /* Customize table-active class for light yellow background */
        .table-active {
            background-color: #d3b140 !important; /* Light yellow */
            --bs-table-bg-state: rgb(166, 166, 255);
        }
        body{
            /* background-color: rgb(196, 225, 255); */
        }
         /* Highlight cells in light pink */
         .highlight-pink {
            background-color: #f2c4c4 !important; /* Light pink */
        }
        /* Toast top right */
        .toast-container {
            position: fixed;
            top: 10%;
            right: 5%;
        }

        .form-label {
            font-weight: bold;
        }


        /* Custom background for the toast */
        .toast-light-blue {
            background-color: #c4f6ff !important; /* Light blue */
            color: #0c5460; /* Dark text to match light blue */
            box-shadow: 0 8px 10px rgba(0, 0, 0, 0.4), 0 6px 20px rgba(0, 0, 0, 0.39); /* Drop shadow */

        }
        /* Breathing glow effect for input field */
        @keyframes breathingGlow {
            0% {
                box-shadow: 0 0 10px rgba(0, 38, 255, 0.5);
            }
            50% {
                box-shadow: 0 0 30px rgba(0, 38, 255, 0.9);
            }
            100% {
                box-shadow: 0 0 10px rgba(0, 38, 255, 0.5);
            }
        }
        .glow-input {
            animation: breathingGlow 2s infinite;
            border: 1px solid rgba(0, 38, 255, 0.5);
        }

        /* Row slide-down animation */
        @keyframes slideDown {
            0% {
                transform: translateY(-20px);
                opacity: 0;
            }
            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }
        .slide-down {
            animation: slideDown 0.5s ease-out;
        }
        .non-selectable {
            background-color: #7314144c !important; /* Light pink for non-selectable rows */
            pointer-events: none; /*  Disable Selection */
        }
        /* Strobe and glow animation for "Scheduled" cells */
        @keyframes strobeGlow {
            0%, 100% {
                box-shadow: 0 0 10px rgba(255, 0, 0, 0.5), 0 0 20px rgba(255, 0, 0, 0.8);
                background-color: #ffe6e6;
            }
            50% {
                box-shadow: 0 0 20px rgba(255, 0, 0, 1), 0 0 40px rgba(255, 0, 0, 1);
                background-color: #ffcccc;
            }
        }
        .strobe-glow {
            animation: strobeGlow 2s infinite;
        }        


    </style>
</head>
<body>

    <!-- Main page header -->
    <div class="page-header" style="padding-top: 15px;">
        <img src="/img/fleetpay_dark.jpg" alt="" style="height: 50px;">
        <p style="font-size: 14px;">Sql Database Testing Environment</p>
    </div>

    
    <br><br>
    <!-- Toggle Button -->
    <button id="toggleSidebar" class="btn btn-secondary" style="position: fixed; top: 20px; left: 20px; z-index: 999; background-color: #0e6170;">
        <i class="fas fa-bars"></i>
    </button>
  

    <!-- Sidebar -->
    <!-- Font Awesome CDN for icons (add in <head> if not already included) -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

        <div class="sidebar" id="sidebar">

            <div class="sidebar-content">
              <br><br>
              <h3 class="section-header" style="text-align: center; text-decoration: wavy;">Main Menu</h3><br>
              <a href="Dashboard.html" style="text-align: center; background-color: #416682;"><strong>ðŸ’¸ My Dashboard</strong></a>
              <hr  class="section-header">
              <h6 class="section-header" style="color: lightgray; font-weight: bolder;">Requests</h6>

              <a href="CreateRequest.html">ðŸ”¸Create Request</a>
              <a href="ReviewRequest.html">ðŸ”¸Review Requests</a>
              <a href="ReportIssue.html">ðŸ”¸Help or Report Issue</a>

              <h6 class="section-header" style="color: lightgray; font-weight: bolder;">Management</h6>

              <a href="CompaniesAdmin.html">ðŸ”¸Company Admin</a>
              <a href="UsersAdmin.html">ðŸ”¸User Admin</a>
              <a href="BankLinking.html" style="background-color: #035b6a;">ðŸ”¸Banking Admin</a>
              <h6 class="section-header" style="color: lightgray; font-weight: bolder;">Financial Records</h6>

              <a href="Payrollexclude.html">ðŸ”¸Payroll Exclusions</a>
              <a href="ArchiveRecords.html">ðŸ”¸Payout Archives</a>
              <a href="settings.html">ðŸ”¸Settings</a>
              <a href="contact.html">ðŸ”¸Contact Us</a>

            </div>
          
            <!-- Moved to bottom -->
            <div class="user-panel">
              <i class="fas fa-user-circle fa-2x me-2"></i>
              
            <div class="user-info">
                <div><strong>Jake W.</strong></div>
                <div style="font-size: 0.85em;">
                    <i class="fas fa-badge-check" style="color: limegreen;"></i> Verified
                  </div>
                </div>

            <div class="user-actions">
                <i class="fas fa-cog mx-2" title="Settings"></i>
                <i class="fas fa-sign-out-alt" title="Logout" onclick="logoutUser()" style="cursor: pointer;"></i>
            </div>
            </div>

          </div>

    <div class="main">

        <div style="margin-left: 300px;">
            <h2 style="color: rgb(187, 187, 187);">Direct Deposit Form Submission</h2>
            <p style="color: white;">Current Submission Status: <span style="color: rgb(251, 107, 107); font-weight: bold;">Incomeplete</span></p>
            <hr style="color: white; width: 85%;">
            <p style="color: white;">Once the form is submitted and approved, you will be able to start placing requests in a few hours or less. </p>
        </div>

        <div class="card text-white bg-secondary shadow-sm my-4" style="max-width: 70%; border-radius: 1rem; margin-left: 300px;">
            <div class="row g-0">
              
              <!-- Left: Text Content -->
              <div class="col-md-7 p-4 d-flex flex-column justify-content-center">
                <h4 class="card-title">
                   Coming Soon: The FleetPay Card ðŸ’³
                </h4>
                <p class="card-text">
                  Discover the upcoming FleetPay Card â€” designed to make your payouts faster, your transactions smoother, and your funds more accessible than ever before.
                </p>
                <p class="card-text">Check your email for notifications soon about the FleePay Card and additional offers.</p>
                <button class="btn btn-light btn-sm mt-2 disabled" style="pointer-events: none; font-weight: bold;">Launching Soon</button>
              </div>
          
              <!-- Right: Promo Image -->
              <div class="col-md-5 d-flex align-items-center justify-content-center p-3">
                <img src="/img/pngimg.com - credit_card_PNG99 (1).png" alt="FleetPay Card Preview" class="img-fluid rounded shadow" style="max-height: 200px;">
              </div>
          
            </div>
          </div>
          
          

              
        <!-- Direct Deposit Form -->
            <div class="container mt-5" style="width: 70%; 
          margin-left: 300px; align-items: center;">
                <div class="card shadow rounded-4">
                <div class="card-body" style="background-color: #e2eeff;">
                    <!-- <h3 class="card-title mb-4 text-center text-primary">Submit Your Direct Deposit Information</h3> -->
                     <br>
            
                    <form id="bankingForm">
                    <div class="mb-3">
                        <label for="nameOnAccount" class="form-label">Name on Account</label>
                        <input type="text" class="form-control" id="nameOnAccount" required>
                    </div>
            
                    <div class="mb-3">
                        <label for="routingNumber" class="form-label">Routing Number</label>
                        <input type="password" class="form-control" id="routingNumber" maxlength="9" pattern="\d{9}" required>
                    </div>
            
                    <div class="mb-3">
                        <label for="accountNumber" class="form-label">Account Number</label>
                        <input type="password" class="form-control" id="accountNumber" required>
                    </div>
            
                    <div class="mb-3">
                        <label for="bankingInstitute" class="form-label">Banking Institute</label>
                        <input type="text" class="form-control" id="bankingInstitute">
                    </div>
            
                    <div class="mb-3">
                        <label for="accountState" class="form-label">State</label>
                        <select class="form-select" id="accountState" required>
                        <option value="">Choose...</option>
                        <option>GA</option><option>AL</option><option>TN</option><option>FL</option>
                        <option>SC</option><option>VA</option><option>WV</option><option>KT</option>
                        <!-- Add more states as needed -->
                        </select>
                    </div>
            
                    <div class="form-check mb-4">
                        <input class="form-check-input pulse-border" type="checkbox" id="consentCheckbox" required>
                        <label class="form-check-label" for="consentCheckbox" style="font-size: large; margin-left: 20px; margin-top: 5px;">
                        I consent to direct deposit of payments into the bank account provided above.
                        </label>
                    </div>
            
                    <div class="d-grid">
                        <button type="submit" class="btn btn-success btn-lg">Submit Information</button>
                    </div>
                    </form>
                </div>
                </div>
            </div>
    
            <div style="margin-left: 300px;">
                <hr style="color: white; width: 85%;">
                <p style="color: white; width: 85%;"><span style="font-weight: bolder;">Privacy Notice:</span><br>
                    FleetPay is committed to protecting your personal and financial information. The banking details you submit through this form are used solely for the purpose of processing direct deposit payments. We do not sell, share, or disclose your information to third parties outside of FleetPay unless required by law or authorized by you. All data is stored securely and handled in accordance with applicable data protection regulations and best practices.</p>
    
                <p style="color: white;">For questions or Concerns, please visit our contact page.</p>
            </div>
    
            <div id="myfooter">
    
                <br>
                <div class="text-center">
                  <hr style="color: white; width: 70%; margin-left: 300px; align-content: center;">
                </div>
                <div class="text-center" style="font-size: large; color: rgb(192, 191, 191); font-weight: bold;">Fleetpay.cash â€” A GenX Company â€” Ellis Ventures 2025 ~ JW</div>
                <br><br>
                
              </div>
          
    

    </div>




</body>
    

    <!-- ================== JAIL TO RESEARCH ======================= -->
    <!-- =========================================================== -->



    <script>
        async function fetchAllCustomers() {
            try {
                // Fetch all records from the server
                const response = await fetch('http://localhost:3000/api/lowes');
                const customers = await response.json();

                const recordsContainer = document.getElementById('records-container');

                // Clear existing records
                recordsContainer.innerHTML = '<h3>All Customers</h3><p>Click on a customer to view their details above:</p>';

                // Populate the records container
                customers.forEach(customer => {
                    const recordDiv = document.createElement('div');
                    recordDiv.classList.add('record');
                    recordDiv.textContent = `${customer.customer_first_name} ${customer.customer_last_name}`;
                    
                    // Add a click event listener to populate fields
                    recordDiv.addEventListener('click', () => {
                        document.getElementById('customer-id').textContent = customer.customer_id;
                        document.getElementById('customer-first-name').textContent = customer.customer_first_name;
                        document.getElementById('customer-last-name').textContent = customer.customer_last_name;
                        document.getElementById('customer-email').textContent = customer.customer_email;
                        document.getElementById('customer-phone').textContent = customer.customer_phone;
                        document.getElementById('delete-button').style.display = 'block';
                        document.getElementById('delete-button').dataset.customerId = customer.customer_id; // Store customer ID in the button
                    });

                    recordsContainer.appendChild(recordDiv);
                });
            } catch (error) {
                console.error('Error fetching customers:', error);
                alert('Failed to load customer records.');
            }
        }



        async function deleteCustomer(customerId) {
            try {
                const response = await fetch(`http://localhost:3000/api/delete-customer/${customerId}`, {
                    method: 'DELETE'
                });

                if (response.ok) {
                    // alert('Customer deleted successfully!');
                    fetchAllCustomers(); // Refresh the list of customers
                    document.getElementById('customer-id').textContent = 'Click a record below';
                    document.getElementById('customer-first-name').textContent = 'Click a record below';
                    document.getElementById('customer-last-name').textContent = 'Click a record below';
                    document.getElementById('customer-email').textContent = 'Click a record below';
                    document.getElementById('customer-phone').textContent = 'Click a record below';
                    document.getElementById('delete-button').style.display = 'none';
                } else {
                    const error = await response.json();
                    alert('Failed to delete customer: ' + error.message);
                }
            } catch (error) {
                console.error('Error deleting customer: ', error);
                alert('An error occurred while deleting the customer.');
            }
        }

         // Attach click event to the delete button
         document.getElementById('delete-button').addEventListener('click', () => {
            const customerId = document.getElementById('delete-button').dataset.customerId;
            if (customerId && confirm('Are you sure you want to delete this record?')) {
                deleteCustomer(customerId);
            }
        });

        // Fetch all customers on page load
        fetchAllCustomers();
    </script>

    <!-- ================== END JAIL RESEARCH ======================= -->
    <!-- ============================================================ -->
    






    <!--      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~      -->
    <!--                ALL SCRIPT REFERENCE FILES BELOW              -->
    <!--      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~      -->

    
    <!-- Link to the script to fetch and display data -->
    <script src="app.js"></script>

    <!-- Link to Request Script -->
    <script src="/javascript/request.js"></script>


    <!-- Bootstrap JS and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- SheetJS Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
    
    <!-- JavaScript for Reset -->
    <script>

    // Update modal's percentage field before opening
        document.getElementById('googleButton').addEventListener('click', function () {
            const percentageField = document.getElementById('percentageField').value;
            document.getElementById('modalPercentageField').value = percentageField || 'N/A';
        });
        // Clear the table and reset the form when "Approve" is clicked
        document.getElementById('approveButton').addEventListener('click', function () {
            insertRequest();
        });
        // Additional JavaScript for table parsing remains unchanged
    </script>

    <!-- Javascript to toggle sidebar -->
    <script>
        document.getElementById('toggleSidebar').addEventListener('click', () => {
        const sidebar = document.getElementById('sidebar');
        sidebar.classList.toggle('collapsed');
        });
    </script>
  



    

    <!--      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~      -->
    <!--        Insert Rows into Database for Payroll Exclusion       -->
    <!--      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~      -->

<script>
        
        document.getElementById('insertButton').addEventListener('click', function () {
        const selectedRows = document.querySelectorAll('#tableBody .table-active');
        if (selectedRows.length === 0) {
            alert('No rows selected for insertion.');
            return;
        }

        // Map table headers
        const headers = [
            "requestId",       // Constant value
            "projectNumber",
            "customerName",
            "installDate",
            "totalLabor",
            "status",
            "jobLink"
        ];

        selectedRows.forEach(row => {
            const cells = Array.from(row.querySelectorAll('td'));
            const rowData = { requestId: "0002" }; // Set constant requestId

            // Map headers to cell values
            cells.forEach((cell, index) => {
                rowData[headers[index + 1]] = cell.textContent.trim(); // Skip requestId
            });

            // Example API call to insert row into the SQL database
            try{
            const response = fetch('http://localhost:3000/insert-row', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(rowData),
            })
            .then(response => {
                if (response.ok) {
                    console.log('Row inserted successfully:', rowData);
                } else {
                    console.error('Failed to insert row:', rowData);
                }
            })
            
        } catch(err){
            console.error(err);
        }
            
        });

        alert('Selected rows have been submitted for insertion.');
    });
</script>


</html>


 
